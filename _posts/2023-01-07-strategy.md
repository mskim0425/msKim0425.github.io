---
layout: post
title:  "í–‰ìœ„íŒ¨í„´ - ì „ëµê³¼ ìƒíƒœ íŒ¨í„´"
date:   2023-01-07 10:11:07 +0900
categories: [CS ,  Design Pattern]
tags: [cs, design pattern]
---
# Strategy Pattern & State Pattern ğŸ§™â€â™‚ï¸

<details>
<summary><span style="color: gold"> ë””ìì¸ íŒ¨í„´ì´ë€? </span></summary>
<div markdown="1">
## <span style="color: gold"> ë””ìì¸ íŒ¨í„´ì´ë€? </span>
- ë””ìì¸ íŒ¨í„´ì€ ì†Œí”„íŠ¸ì›¨ì–´ ê³µí•™ì˜ ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„ì—ì„œ ê³µí†µìœ¼ë¡œ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ ìì£¼ ì“°ì´ëŠ” ì„¤ê³„ ë°©ë²•ì„ ì •ë¦¬í•œ íŒ¨í„´ì´ë‹¤.
- ë””ìì¸ íŒ¨í„´ì„ ì°¸ê³ í•˜ì—¬ ê°œë°œí•˜ë©´ íš¨ìœ¨ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±, ìš´ìš©ì„±ì´ ë†’ì•„ì§€ë©°, í”„ë¡œê·¸ë¨ ìµœì í™”ê°€ ëœë‹¤ê³  í•œë‹¤.
ã€€ 

ë””ìì¸ íŒ¨í„´ì„ ëª©ì ê³¼ ë²”ìœ„ë¡œ ë‚˜ëˆŒìˆ˜ ìˆë‹¤

|êµ¬ë¶„|ìœ í˜•|ì„¤ëª…|
|:---:|:---:|:---|
| |ìƒì„±|ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì— ê´€ì—¬, í´ë˜ìŠ¤ ì •ì˜ì™€ ê°ì²´ ìƒì„± ë°©ì‹ì„ êµ¬ì¡°í™”, ìº¡ìŠí™”ë¥¼ ìˆ˜í–‰|
|ëª©ì |êµ¬ì¡°|ë” í° êµ¬ì¡° í˜•ì„± ëª©ì ìœ¼ë¡œ í´ë˜ìŠ¤ë‚˜ ê°ì²´ì˜ ì¡°í•©ì„ ë‹¤ë£¨ëŠ” íŒ¨í„´|
|    |í–‰ìœ„|í´ë˜ìŠ¤ë‚˜ ê°ì²´ë“¤ì´ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ë²•ê³¼ ì—­í•  ë¶„ë‹´ì„ ë‹¤ë£¨ëŠ” íŒ¨í„´|
|ë²”ìœ„|í´ë˜ìŠ¤|í´ë˜ìŠ¤ê°„ ê´€ë ¨ì„±(ìƒì†), ì»´íŒŒì¼ ì‹œ ì •ì ìœ¼ë¡œ ê²°ì •|
|    |ê°ì²´|ê°ì²´ ê°„ ê´€ë ¨ì„±ì„ ë‹¤ë£¨ëŠ” íŒ¨í„´, ëŸ°íƒ€ì„ ì‹œ ë™ì ìœ¼ë¡œ ê²°ì •|

---
</div>
</details>
ã€€ã€€
>`ì „ëµ íŒ¨í„´`ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ë‚œ í›„, ìƒíƒœê°€ ê±°ì˜ `ë°”ë€Œì§€ ì•ŠëŠ” ê²½ìš°`ì— ì‚¬ìš©   
>`ìƒíƒœ íŒ¨í„´`ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ë‚œ í›„, ìƒíƒœê°€ `ë¹ˆë²ˆí•˜ê²Œ ë°”ë€ŒëŠ” ê²½ìš°`ì— ì‚¬ìš©  
{: .prompt-tip}  

## <span style="color: gold"> ì „ëµ íŒ¨í„´ì´ë€? strategy pattern </span>
ì •ì±…íŒ¨í„´ì´ë¼ê³  í•˜ë©°, ê°ì²´ì˜ í–‰ìœ„ë¥¼ ë°”ê¾¸ê³  ì‹¶ì„ë–„ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ì•Šê³  'ìº¡ìŠí™”í•œ ì•Œê³ ë¦¬ì¦˜'ì„ ì»¨í…ìŠ¤íŠ¸ ì•ˆì—ì„œ ë°”ê¿”ì£¼ë©´ì„œ ìƒí˜¸ê°„ì˜ êµì²´ê°€ ê°€ëŠ¥í•˜ë„ë¡ ë§Œë“œëŠ” íŒ¨í„´ì´ë‹¤.  
ê²°ì œì‹œìŠ¤í…œì—ì„œ ì¹´ì¹´ì˜¤í˜ì´ë“  ë„¤ì´ë²„í˜ì´ë“  ì „ëµë§Œ ë°”ê¿”ì„œ ê²°ì œë¥¼ ì§„í–‰í•˜ë„ë¡ í•´ì£¼ëŠ” ê²ƒì´ ì „ëµ íŒ¨í„´ì´ë‹¤.  

ì¸ìŠ¤í„´ìŠ¤ ì˜¤ë¦¬ê°€ íƒœì–´ë‚ ë–„ ê¼­ í•œê°€ì§€ëŠ” ê°€ì§€ê³  íƒœì–´ë‚œë‹¤ê³  ê°€ì •í•´ë³´ì.
1. ë‚  ìˆ˜ìˆëŠ” ì˜¤ë¦¬
2. ë‚  ìˆ˜ì—†ëŠ” ì˜¤ë¦¬
   
í•œë²ˆ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±(íƒœì–´ë‚˜ë©´) ì‚´ì•„ê°€ëŠ” ë™ì•ˆ ë‚ ì§€ ëª»í•˜ëŠ” ì˜¤ë¦¬ê°€ ê°‘ìê¸° ë‚  ìˆ˜ëŠ” ì—†ëŠ” ê²ƒì´ë‹¤.  
ì¦‰, ìƒíƒœê°€ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤.
```java
interface Fly{
    public void fly();
}
class canfly implements Duck{
   @Override
   public void fly(){
    System.out.print("ë‚ ìˆ˜ ìˆë‹¤.");
   } 
}
class cannotfly implements Duck{
   @Override
   public void fly(){
    System.out.print("ë‚ ìˆ˜ ì—†ë‹¤.");
   } 
}
```
ì´ëŸ°ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì§œë©´ ìˆ˜ì •ì´ë‚˜ ê¸°ëŠ¥ì„ ì¶”ê°€ì‹œì— ë©”ì„œë“œì˜ ì¤‘ë³µë¬¸ì œê°€ ë°œìƒê³¼ OCPë¥¼ ìœ„ë°˜í•˜ê²Œ ëœë‹¤.  

```java
abstract class Duck{
    private String name;
    private FlyingStrategy flyingStrategy;

    public Duck(String name) {
        this.name = name;
    }

    public void fly() {
        System.out.printf(name +"ëŠ” ");
        flyingStrategy.fly();
    }
    public void setFlyingStrategy(FlyingStrategy flyingStrategy) {
        this.flyingStrategy = flyingStrategy;
    }
}

class blackDuck extends Duck{
    public blackDuck(String name){
        super(name);
    }
}

class whiteDuck extends Duck{
    public whiteDuck(String name){
        super(name);
    }
}
//fly ì¸í„°í˜ì´ìŠ¤
interface FlyingStrategy{
    public void fly();
}

//fly êµ¬í˜„ì²´
class canFly implements FlyingStrategy {
    @Override
    public void fly() {
        System.out.println("can fly");
    }
}
//fly êµ¬í˜„ì²´
class cannotFly implements FlyingStrategy {
    @Override
    public void fly() {
        System.out.println("cannot fly");
    }
}


public class Client {
    public static void main(String[] args) {
        blackDuck blackDuck = new blackDuck("ê²€ì •ì˜¤ë¦¬");
        whiteDuck whiteDuck = new whiteDuck("í°ì˜¤ë¦¬");
        blackDuck.setFlyingStrategy(new canFly());
        whiteDuck.setFlyingStrategy(new cannotFly());
        blackDuck.fly();
        whiteDuck.fly();
    }
}
//ê²€ì •ì˜¤ë¦¬ëŠ” can fly
//í°ì˜¤ë¦¬ëŠ” cannot fly
```
![img](https://github.com/msKim92/msKim92.github.io/blob/main/images/design/%EC%A0%84%EB%9E%B5%ED%8C%A8%ED%84%B4.png?raw=true)

## <span style="color: gold"> ìƒíƒœ íŒ¨í„´ì´ë€? state pattern</span>
ìƒíƒœ ê°ì²´ì— ì¼ë ¨ì˜ í–‰ë™ì´ ìº¡ìŠí™”ê°€ ëœë‹¤. ì¦‰, ì‹¤í–‰ì¤‘ì¸ ê°ì²´ê°€ ì—¬ëŸ¬ ìƒíƒœ ê°ì²´ì¤‘ í•˜ë‚˜ì¸ ê°ì²´ì—ê²Œ ëª¨ë“  í–‰ë™ì„ ë§ê¸°ê²Œ ëœë‹¤.


ì•„ë˜ì™€ ê°™ì´ ìíŒê¸°ê¸°ê³„ê°€ ìˆë‹¤ê³  ê°€ì •í•´ë³´ì..
```java
1. ì´ ê²½ìš°ì—ëŠ” ê¸°ê³„ê°€ HasMoney() ìƒíƒœ ìˆì„ë•Œ insert_money()ê°€ í˜¸ì¶œë˜ë©´ì„œ Sold() ìƒíƒœë¡œ ì „í™˜ëœë‹¤.  

                                  ==> ëˆì´ ë¶€ì¡±í• ë•Œ NoMoney();
                                  ==> ëˆì´ ìˆì„ë•Œ HasMoney();
-insert_money()-> Vending Machine =[í˜„ì¬ ìƒíƒœ]=> ê±°ìŠ¤ë¦„ëˆì´ ì—†ì„ë–„ NoChange();
                                  ==> ë‹¤ íŒ”ë ¸ì„ë•Œ SoldOut();
                                  ==> íŒ”ë¦´ë–„ Sold();

2. í˜„ì¬ ìƒíƒœê°€ Sold ë©”ì„œë“œë¡œ ì „í™˜ë˜ë©´ì„œ ìŒë£Œë¥¼ ë°˜ì¶œí•œë‹¤.

                                  ==> ëˆì´ ë¶€ì¡±í• ë•Œ NoMoney();
                                  ==> ëˆì´ ìˆì„ë•Œ HasMoney();
                                  ==> ê±°ìŠ¤ë¦„ëˆì´ ì—†ì„ë–„ NoChange();
                                  ==> ë‹¤ íŒ”ë ¸ì„ë•Œ SoldOut();
Vending Machine=[í˜„ì¬ ìƒíƒœ]+ dispense()=> íŒ”ë¦´ë–„ Sold();

3. ê·¸í›„ ìŒë£Œê°€ ìˆìœ¼ë©´ NoMoney(); , ê±°ìŠ¤ë¦„ëˆì´ì—†ìœ¼ë©´ NoChange(), ë§¤ì§„ ì‹œ SoldOut()ìœ¼ë¡œ ì´ë™í•œë‹¤.
```

ì´ì²˜ëŸ¼ ìƒíƒœë¥¼ ë¹ˆë²ˆíˆ ë°”ë€ŒëŠ” ê²½ìš° ìƒíƒœíŒ¨í„´ì„ ì‚¬ìš©í•œë‹¤.  ì½”ë“œë¥¼ ê°„ë‹¨í•˜ê²Œ ì§œë³´ê² ë‹¤.
```java
ë³€ê²½ì „ ë¡œì§
public class VendingMachine {
    public static enum State {NoMoney, HasMoney, ...}
    private State state = State.NoMoney;
    public void changeState(State state){
       this.state=state;
   }
    public void insert_money(int money) {
        switch (state) {
            case NoMoney:
            case HasMoney:
            case Nochange:
            case SoldOut:
            case Sold:
        }
    }
}
```
ë²Œì¨ë¶€í„° case ë¬¸ì„ ë³´ë©´ ì†ì´ ë‹µë‹µí•˜ë‹¤..
ë³€ê²½í›„ ë¡œì§... ìš°ì„  ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì.
```java
interface State{
    public void money(int money, VendingMachine machine);
}
class NoMoney implements State{
    @Override
    public void money(int money, VendingMachine machine) {
        ...
    }
}

class HasMoney implements State{
    @Override
    public void money(int money, VendingMachine machine){
        machine.changeState(new Sold());
    }
}

class Sold implements State{
    @Override
    public void money(int money, VendingMachine machine){
        machine.changeState(new NoMoney());
    }
}


public class VendingMachine {
    private State state;
    public VendingMachine() {
        state = new NoMoney();
    }
    public void insert_money(int money) {
        state.money(money, this); // í•µì‹¬í¬ì¸íŠ¸: êµ¬í˜„ìœ„ì„
    }
    public void changeState(State state){
        this.state = state;
    }
}
```


## <span style="color: gold"> ê³µí†µì </span>  
ì°¨ì´ì ì€ ìœ„ì— ë§í•œê²ƒì²˜ëŸ¼ stateëŠ” ëŠ¥ë™ì ìœ¼ë¡œ ë³€í•˜ê³  strategyëŠ” ìˆ˜ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” ì„±ì§ˆì´ ìˆë‹¤.  
ê³µí†µì ì€ ì‹¤í–‰ì¤‘ì¸ í´ë˜ìŠ¤ì˜ ì˜í–¥ì„ ë°›ì§€ì•Šê³  ìœ ì—°í•œ ë³€í™˜ì´ ê°€ëŠ¥í•œ ì ì´ë‹¤.  

## <span style="color: gold"> ê²°ë¡ </span>  
`ì „ëµ íŒ¨í„´`: ìƒì„± ì‹œ, ë¹„ìŠ·í•˜ë©´ì„œ ì¡°ê¸ˆì”© ë‹¤ë¥¸ í–‰ë™ì„ ë¬¶ê³  ì‹¶ì„ë•Œ ì‚¬ìš©í•œë‹¤.  
`ìƒíƒœ íŒ¨í„´`: if,else ì¡°ê±´ë¬¸ì´ ë„ˆë¬´ ë§ì´ ë“¤ì–´ê°€ ì§€ì €ë¶„í•´ë³´ì¼ ë•Œ ì‚¬ìš©í•œë‹¤.
