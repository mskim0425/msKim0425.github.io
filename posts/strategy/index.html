<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="행위패턴 - 전략패턴과 상태 패턴" /><meta property="og:locale" content="en" /><meta name="description" content="Strategy Pattern &amp; State Pattern 🧙‍♂️" /><meta property="og:description" content="Strategy Pattern &amp; State Pattern 🧙‍♂️" /><link rel="canonical" href="https://mskim0425.github.io/posts/strategy/" /><meta property="og:url" content="https://mskim0425.github.io/posts/strategy/" /><meta property="og:site_name" content="SoThoughtful;" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-07T10:11:07+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="행위패턴 - 전략패턴과 상태 패턴" /><meta name="twitter:site" content="@" /><meta name="google-site-verification" content="jbF7fLQfFijq2Mi-8IkGRoUPQhLTlkTskBtbAoEmH4o" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-04-05T22:58:08+09:00","datePublished":"2023-01-07T10:11:07+09:00","description":"Strategy Pattern &amp; State Pattern 🧙‍♂️","headline":"행위패턴 - 전략패턴과 상태 패턴","mainEntityOfPage":{"@type":"WebPage","@id":"https://mskim0425.github.io/posts/strategy/"},"url":"https://mskim0425.github.io/posts/strategy/"}</script><title>행위패턴 - 전략패턴과 상태 패턴 | SoThoughtful;</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="SoThoughtful;"><meta name="application-name" content="SoThoughtful;"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/107451298?s=400&u=e5165c561ac67ec7819798bbd37382f3630f4a99&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">SoThoughtful;</a></div><div class="site-subtitle font-italic">백엔드 개발자</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>REFERENCE</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/msKim0425" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['mins402kim','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/%EB%AF%BC%EC%84%AD-%EA%B9%80-610901191/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>행위패턴 - 전략패턴과 상태 패턴</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>행위패턴 - 전략패턴과 상태 패턴</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1673053867" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jan 7, 2023 </em> </span> <span> Updated <em class="" data-ts="1680703088" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 5, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/msKim0425">Minsub Kim</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1592 words"> <em>8 min</em> read</span></div></div></div><div class="post-content"><h1 id="strategy-pattern--state-pattern-️">Strategy Pattern &amp; State Pattern 🧙‍♂️</h1><details> <summary><span style="color: gold"> 디자인 패턴이란? </span></summary><div><h2 id="section"><span class="mr-2"><span style="color: gold"> 디자인 패턴이란? </span></span><a href="#section" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>디자인 패턴은 소프트웨어 공학의 소프트웨어 설계에서 공통으로 발생하는 문제를 자주 쓰이는 설계 방법을 정리한 패턴이다.<li>디자인 패턴을 참고하여 개발하면 효율성과 유지보수성, 운용성이 높아지며, 프로그램 최적화가 된다고 한다. 　</ul><p>디자인 패턴을 목적과 범위로 나눌수 있다</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">구분<th style="text-align: center">유형<th style="text-align: left">설명<tbody><tr><td style="text-align: center"> <td style="text-align: center">생성<td style="text-align: left">객체 인스턴스 생성에 관여, 클래스 정의와 객체 생성 방식을 구조화, 캡슐화를 수행<tr><td style="text-align: center">목적<td style="text-align: center">구조<td style="text-align: left">더 큰 구조 형성 목적으로 클래스나 객체의 조합을 다루는 패턴<tr><td style="text-align: center"> <td style="text-align: center">행위<td style="text-align: left">클래스나 객체들이 상호작용하는 방법과 역할 분담을 다루는 패턴<tr><td style="text-align: center">범위<td style="text-align: center">클래스<td style="text-align: left">클래스간 관련성(상속), 컴파일 시 정적으로 결정<tr><td style="text-align: center"> <td style="text-align: center">객체<td style="text-align: left">객체 간 관련성을 다루는 패턴, 런타임 시 동적으로 결정</table></div><hr /></div></details><p>　　</p><blockquote class="prompt-tip"><div><p><code class="language-plaintext highlighter-rouge">전략 패턴</code>은 인스턴스를 생성하고 난 후, 상태가 거의 <code class="language-plaintext highlighter-rouge">바뀌지 않는 경우</code>에 사용 <br /> <code class="language-plaintext highlighter-rouge">상태 패턴</code>은 인스턴스를 생성하고 난 후, 상태가 <code class="language-plaintext highlighter-rouge">빈번하게 바뀌는 경우</code>에 사용</p></div></blockquote><h2 id="-전략-패턴이란-strategy-pattern-"><span class="mr-2"><span style="color: gold"> 전략 패턴이란? strategy pattern </span></span><a href="#-전략-패턴이란-strategy-pattern-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>정책패턴이라고 하며, 객체의 행위를 바꾸고 싶을떄 직접 수정하지 않고 ‘캡슐화한 알고리즘’을 컨텍스트 안에서 바꿔주면서 상호간의 교체가 가능하도록 만드는 패턴이다.<br /> 결제시스템에서 카카오페이든 네이버페이든 전략만 바꿔서 결제를 진행하도록 해주는 것이 전략 패턴이다.</p><p>인스턴스 오리가 태어날떄 꼭 한가지는 가지고 태어난다고 가정해보자.</p><ol><li>날 수있는 오리<li>날 수없는 오리</ol><p>한번 인스턴스가 생성(태어나면) 살아가는 동안 날지 못하는 오리가 갑자기 날 수는 없는 것이다.<br /> 즉, 상태가 바뀌지 않는다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kd">interface</span> <span class="nc">Fly</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">();</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">canfly</span> <span class="kd">implements</span> <span class="nc">Duck</span><span class="o">{</span>
   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">(){</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"날수 있다."</span><span class="o">);</span>
   <span class="o">}</span> 
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">cannotfly</span> <span class="kd">implements</span> <span class="nc">Duck</span><span class="o">{</span>
   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">(){</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"날수 없다."</span><span class="o">);</span>
   <span class="o">}</span> 
<span class="o">}</span>
</pre></table></code></div></div><p>이런식으로 코드를 짜면 수정이나 기능을 추가시에 메서드의 중복문제가 발생과 OCP를 위반하게 된다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre><td class="rouge-code"><pre><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Duck</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">FlyingStrategy</span> <span class="n">flyingStrategy</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Duck</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="n">name</span> <span class="o">+</span><span class="s">"는 "</span><span class="o">);</span>
        <span class="n">flyingStrategy</span><span class="o">.</span><span class="na">fly</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFlyingStrategy</span><span class="o">(</span><span class="nc">FlyingStrategy</span> <span class="n">flyingStrategy</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">flyingStrategy</span> <span class="o">=</span> <span class="n">flyingStrategy</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">blackDuck</span> <span class="kd">extends</span> <span class="nc">Duck</span><span class="o">{</span>
    <span class="kd">public</span> <span class="nf">blackDuck</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">){</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">whiteDuck</span> <span class="kd">extends</span> <span class="nc">Duck</span><span class="o">{</span>
    <span class="kd">public</span> <span class="nf">whiteDuck</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">){</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//fly 인터페이스</span>
<span class="kd">interface</span> <span class="nc">FlyingStrategy</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">//fly 구현체</span>
<span class="kd">class</span> <span class="nc">canFly</span> <span class="kd">implements</span> <span class="nc">FlyingStrategy</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"can fly"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//fly 구현체</span>
<span class="kd">class</span> <span class="nc">cannotFly</span> <span class="kd">implements</span> <span class="nc">FlyingStrategy</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"cannot fly"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">blackDuck</span> <span class="n">blackDuck</span> <span class="o">=</span> <span class="k">new</span> <span class="n">blackDuck</span><span class="o">(</span><span class="s">"검정오리"</span><span class="o">);</span>
        <span class="n">whiteDuck</span> <span class="n">whiteDuck</span> <span class="o">=</span> <span class="k">new</span> <span class="n">whiteDuck</span><span class="o">(</span><span class="s">"흰오리"</span><span class="o">);</span>
        <span class="n">blackDuck</span><span class="o">.</span><span class="na">setFlyingStrategy</span><span class="o">(</span><span class="k">new</span> <span class="n">canFly</span><span class="o">());</span>
        <span class="n">whiteDuck</span><span class="o">.</span><span class="na">setFlyingStrategy</span><span class="o">(</span><span class="k">new</span> <span class="n">cannotFly</span><span class="o">());</span>
        <span class="n">blackDuck</span><span class="o">.</span><span class="na">fly</span><span class="o">();</span>
        <span class="n">whiteDuck</span><span class="o">.</span><span class="na">fly</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//검정오리는 can fly</span>
<span class="c1">//흰오리는 cannot fly</span>
</pre></table></code></div></div><p><img data-src="https://github.com/mskim0425/mskim0425.github.io/blob/main/images/design/%EC%A0%84%EB%9E%B5%ED%8C%A8%ED%84%B4.png?raw=https://raw.githubusercontent.com/cotes2020/chirpy-images/maintrue" alt="img" data-proofer-ignore></p><h2 id="-상태-패턴이란-state-pattern"><span class="mr-2"><span style="color: gold"> 상태 패턴이란? state pattern</span></span><a href="#-상태-패턴이란-state-pattern" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>상태 객체에 일련의 행동이 캡슐화가 된다. 즉, 실행중인 객체가 여러 상태 객체중 하나인 객체에게 모든 행동을 맞기게 된다.</p><p>아래와 같이 자판기기계가 있다고 가정해보자..</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="mi">1</span><span class="o">.</span> <span class="n">이</span> <span class="n">경우에는</span> <span class="n">기계가</span> <span class="nc">HasMoney</span><span class="o">()</span> <span class="n">상태</span> <span class="n">있을때</span> <span class="n">insert_money</span><span class="o">()</span><span class="n">가</span> <span class="n">호출되면서</span> <span class="nc">Sold</span><span class="o">()</span> <span class="n">상태로</span> <span class="n">전환된다</span><span class="o">.</span>  

                                  <span class="o">==&gt;</span> <span class="n">돈이</span> <span class="n">부족할때</span> <span class="nc">NoMoney</span><span class="o">();</span>
                                  <span class="o">==&gt;</span> <span class="n">돈이</span> <span class="n">있을때</span> <span class="nc">HasMoney</span><span class="o">();</span>
<span class="o">-</span><span class="n">insert_money</span><span class="o">()-&gt;</span> <span class="nc">Vending</span> <span class="nc">Machine</span> <span class="o">=[</span><span class="n">현재</span> <span class="n">상태</span><span class="o">]=&gt;</span> <span class="n">거스름돈이</span> <span class="n">없을떄</span> <span class="nc">NoChange</span><span class="o">();</span>
                                  <span class="o">==&gt;</span> <span class="n">다</span> <span class="n">팔렸을때</span> <span class="nc">SoldOut</span><span class="o">();</span>
                                  <span class="o">==&gt;</span> <span class="n">팔릴떄</span> <span class="nc">Sold</span><span class="o">();</span>

<span class="mi">2</span><span class="o">.</span> <span class="n">현재</span> <span class="n">상태가</span> <span class="nc">Sold</span> <span class="n">메서드로</span> <span class="n">전환되면서</span> <span class="n">음료를</span> <span class="n">반출한다</span><span class="o">.</span>

                                  <span class="o">==&gt;</span> <span class="n">돈이</span> <span class="n">부족할때</span> <span class="nc">NoMoney</span><span class="o">();</span>
                                  <span class="o">==&gt;</span> <span class="n">돈이</span> <span class="n">있을때</span> <span class="nc">HasMoney</span><span class="o">();</span>
                                  <span class="o">==&gt;</span> <span class="n">거스름돈이</span> <span class="n">없을떄</span> <span class="nc">NoChange</span><span class="o">();</span>
                                  <span class="o">==&gt;</span> <span class="n">다</span> <span class="n">팔렸을때</span> <span class="nc">SoldOut</span><span class="o">();</span>
<span class="nc">Vending</span> <span class="nc">Machine</span><span class="o">=[</span><span class="n">현재</span> <span class="n">상태</span><span class="o">]+</span> <span class="n">dispense</span><span class="o">()=&gt;</span> <span class="n">팔릴떄</span> <span class="nc">Sold</span><span class="o">();</span>

<span class="mi">3</span><span class="o">.</span> <span class="n">그후</span> <span class="n">음료가</span> <span class="n">있으면</span> <span class="nc">NoMoney</span><span class="o">();</span> <span class="o">,</span> <span class="n">거스름돈이없으면</span> <span class="nc">NoChange</span><span class="o">(),</span> <span class="n">매진</span> <span class="n">시</span> <span class="nc">SoldOut</span><span class="o">()</span><span class="n">으로</span> <span class="n">이동한다</span><span class="o">.</span>
</pre></table></code></div></div><p>이처럼 상태를 빈번히 바뀌는 경우 상태패턴을 사용한다. 코드를 간단하게 짜보겠다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="n">변경전</span> <span class="n">로직</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">VendingMachine</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">enum</span> <span class="nc">State</span> <span class="o">{</span><span class="nc">NoMoney</span><span class="o">,</span> <span class="nc">HasMoney</span><span class="o">,</span> <span class="o">...}</span>
    <span class="kd">private</span> <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">State</span><span class="o">.</span><span class="na">NoMoney</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changeState</span><span class="o">(</span><span class="nc">State</span> <span class="n">state</span><span class="o">){</span>
       <span class="k">this</span><span class="o">.</span><span class="na">state</span><span class="o">=</span><span class="n">state</span><span class="o">;</span>
   <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insert_money</span><span class="o">(</span><span class="kt">int</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">state</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">case</span> <span class="nl">NoMoney:</span>
            <span class="k">case</span> <span class="nl">HasMoney:</span>
            <span class="k">case</span> <span class="nl">Nochange:</span>
            <span class="k">case</span> <span class="nl">SoldOut:</span>
            <span class="k">case</span> <span class="nl">Sold:</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>벌써부터 case 문을 보면 속이 답답하다.. 변경후 로직… 우선 인터페이스를 만들자.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="kd">interface</span> <span class="nc">State</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">money</span><span class="o">(</span><span class="kt">int</span> <span class="n">money</span><span class="o">,</span> <span class="nc">VendingMachine</span> <span class="n">machine</span><span class="o">);</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">NoMoney</span> <span class="kd">implements</span> <span class="nc">State</span><span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">money</span><span class="o">(</span><span class="kt">int</span> <span class="n">money</span><span class="o">,</span> <span class="nc">VendingMachine</span> <span class="n">machine</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">...</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">HasMoney</span> <span class="kd">implements</span> <span class="nc">State</span><span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">money</span><span class="o">(</span><span class="kt">int</span> <span class="n">money</span><span class="o">,</span> <span class="nc">VendingMachine</span> <span class="n">machine</span><span class="o">){</span>
        <span class="n">machine</span><span class="o">.</span><span class="na">changeState</span><span class="o">(</span><span class="k">new</span> <span class="nc">Sold</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Sold</span> <span class="kd">implements</span> <span class="nc">State</span><span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">money</span><span class="o">(</span><span class="kt">int</span> <span class="n">money</span><span class="o">,</span> <span class="nc">VendingMachine</span> <span class="n">machine</span><span class="o">){</span>
        <span class="n">machine</span><span class="o">.</span><span class="na">changeState</span><span class="o">(</span><span class="k">new</span> <span class="nc">NoMoney</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">VendingMachine</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">State</span> <span class="n">state</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">VendingMachine</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">state</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NoMoney</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insert_money</span><span class="o">(</span><span class="kt">int</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">state</span><span class="o">.</span><span class="na">money</span><span class="o">(</span><span class="n">money</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span> <span class="c1">// 핵심포인트: 구현위임</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changeState</span><span class="o">(</span><span class="nc">State</span> <span class="n">state</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="n">state</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="-공통점"><span class="mr-2"><span style="color: gold"> 공통점</span></span><a href="#-공통점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>차이점은 위에 말한것처럼 state는 능동적으로 변하고 strategy는 수동적으로 변하는 성질이 있다.<br /> 공통점은 실행중인 클래스의 영향을 받지않고 유연한 변환이 가능한 점이다.</p><h2 id="-결론"><span class="mr-2"><span style="color: gold"> 결론</span></span><a href="#-결론" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">전략 패턴</code>: 생성 시, 비슷하면서 조금씩 다른 행동을 묶고 싶을때 사용한다.<br /> <code class="language-plaintext highlighter-rouge">상태 패턴</code>: if,else 조건문이 너무 많이 들어가 지저분해보일 때 사용한다.</p><h2 id="-출처"><span class="mr-2"><span style="color: gold"> 출처</span></span><a href="#-출처" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Head First 디자인패턴<li>면접을 위한 CS 전공지식노트</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/cs/'>CS</a>, <a href='/categories/design-pattern/'>Design Pattern</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cs/" class="post-tag no-text-decoration" >cs</a> <a href="/tags/design-pattern/" class="post-tag no-text-decoration" >design pattern</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%ED%96%89%EC%9C%84%ED%8C%A8%ED%84%B4+-+%EC%A0%84%EB%9E%B5%ED%8C%A8%ED%84%B4%EA%B3%BC+%EC%83%81%ED%83%9C+%ED%8C%A8%ED%84%B4+-+SoThoughtful%3B&url=https%3A%2F%2Fmskim0425.github.io%2Fposts%2Fstrategy%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%ED%96%89%EC%9C%84%ED%8C%A8%ED%84%B4+-+%EC%A0%84%EB%9E%B5%ED%8C%A8%ED%84%B4%EA%B3%BC+%EC%83%81%ED%83%9C+%ED%8C%A8%ED%84%B4+-+SoThoughtful%3B&u=https%3A%2F%2Fmskim0425.github.io%2Fposts%2Fstrategy%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmskim0425.github.io%2Fposts%2Fstrategy%2F&text=%ED%96%89%EC%9C%84%ED%8C%A8%ED%84%B4+-+%EC%A0%84%EB%9E%B5%ED%8C%A8%ED%84%B4%EA%B3%BC+%EC%83%81%ED%83%9C+%ED%8C%A8%ED%84%B4+-+SoThoughtful%3B" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fmskim0425.github.io%2Fposts%2Fstrategy%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="mskim0425/mskim0425.github.io" issue-term="pathname" theme="github-dark" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/java-basic-2/">Basic Confusing Questions Ⅱ 🤷‍♂️ (17개)</a><li><a href="/posts/query_series1/">mysql 쿼리 기능</a><li><a href="/posts/about_index/">INDEX에 관하여</a><li><a href="/posts/useful_gems/">Ruby GEM 시리즈</a><li><a href="/posts/debug_rails/">Rails 디버깅</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cs/">cs</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/mysql/">mysql</a> <a class="post-tag" href="/tags/rails/">rails</a> <a class="post-tag" href="/tags/sql/">sql</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/questions/">questions</a> <a class="post-tag" href="/tags/ruby-on-rails/">ruby-on-rails</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/proxy/"><div class="card-body"> <em class="small" data-ts="1667369457" data-df="ll" > Nov 2, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>구조패턴 - 프록시 패턴</h3><div class="text-muted small"><p> Proxy Pattern 디자인 패턴이란? 디자인 패턴이란? 디자인 패턴은 소프트웨어 공학의 소프트웨어 설계에서 공통으로 발생하는 문제를 자주 쓰이는 설계 방법을 정리한 패턴이다. 디자인 패턴을 참고하여 개발하면 효율성과 유지보수성, 운용성이 높아지며, 프로그램 최적화가 된다고 한다. 　 ...</p></div></div></a></div><div class="card"> <a href="/posts/fasade/"><div class="card-body"> <em class="small" data-ts="1667819467" data-df="ll" > Nov 7, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>구조패턴 - 파사드 패턴</h3><div class="text-muted small"><p> Facade Pattern 🧙‍♂️ 디자인 패턴이란? 디자인 패턴이란? 디자인 패턴은 소프트웨어 공학의 소프트웨어 설계에서 공통으로 발생하는 문제를 자주 쓰이는 설계 방법을 정리한 패턴이다. 디자인 패턴을 참고하여 개발하면 효율성과 유지보수성, 운용성이 높아지며, 프로그램 최적화가 된다고 한다. 　 ...</p></div></div></a></div><div class="card"> <a href="/posts/adapter/"><div class="card-body"> <em class="small" data-ts="1668601267" data-df="ll" > Nov 16, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>구조패턴 - 어댑터 패턴</h3><div class="text-muted small"><p> Adapter Pattern 디자인 패턴이란? 디자인 패턴이란? 디자인 패턴은 소프트웨어 공학의 소프트웨어 설계에서 공통으로 발생하는 문제를 자주 쓰이는 설계 방법을 정리한 패턴이다. 디자인 패턴을 참고하여 개발하면 효율성과 유지보수성, 운용성이 높아지며, 프로그램 최적화가 된다고 한다. 　 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/persistence-context/" class="btn btn-outline-primary" prompt="Older"><p>Persistence Context</p></a> <a href="/posts/compare/" class="btn btn-outline-primary" prompt="Newer"><p>Comparator & Comparable</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cs/">cs</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/mysql/">mysql</a> <a class="post-tag" href="/tags/rails/">rails</a> <a class="post-tag" href="/tags/sql/">sql</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/questions/">questions</a> <a class="post-tag" href="/tags/ruby-on-rails/">ruby-on-rails</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/msKim0425">Minsub Kim</a>.</p></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
